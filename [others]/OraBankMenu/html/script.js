let isLogin=!1,codeInput="",param="",filter=["dollar1","dollar5","dollar10","dollar50","dollar100","dollar500"],am=[1,5,10,50,100,500];function updateMenu(){isLogin?($("#menu-login").hide(),$("#menu-bank").show(),$("#page").css("width","1520px"),setTimeout(function(){$("#menu-bank").css("opacity","1")},300)):($("#menu-bank").hide(),$("#menu-login").show(),$("#page").css("width","600px"),$("#menu-bank").css("opacity","0"))}function updateContent(t){for(let e of document.getElementsByClassName("container"))e.style.display="none";for(let n of(document.getElementById(t).style.display="flex",document.getElementById("navbar-menu").children))n.classList.contains("active")&&n.classList.remove("active"),n.id=="menu-"+t&&n.classList.add("active")}function updateAmountSelector(t){for(let e of filter){let n=document.getElementById("bill-amount-"+e);n.dataset.max=t[e].total,n.querySelector(".bill-amount-total").innerHTML=" ("+t[e].total+")"}}function setData(){$("#player-name").html(param.Cards.name);let t=param.Cards.number.toString().match(/.{1,4}/g);$("#player-card-number").html(t.join(" ")),$("#player-card-name").html(param.Cards.name),$("#player-card-image").attr("src","./assets/"+param.Cards.type+".png");let e=param.Accounts.amount.toLocaleString(void 0,"en-US");for(let n of(e=e.replace(/,/g," "),$("#player-account-balance").html(e),$("#player-account-label").html(param.Accounts.label),$("#player-account-iban").html(param.Accounts.iban),$("#player-account-phone-number").html(param.Accounts.phone_number),$("#history-container").empty(),param.History)){let a='<div class="history-item"><div><p>'+n.src+' (<span class="remove">-'+n.montant+"$</span>)</p><p>"+n.dest+' (<span class="add">+'+n.montant+'$</span>)</p></div><div class="history-item-titre"><p>Titre : <span>'+n.title+`</span></p></div><div class="history-item-detail"><p>D\xe9tails : <span>`+n.details+"</span></p></div></div>";$("#history-container").append(a)}}$(function(){window.onload=t=>{for(let e of(codeInput=document.getElementById("code-input"),window.addEventListener("message",t=>{var e=t.data;if(void 0!==e)switch(e.type){case"ui":e.display?(isLogin=!0,param=e.param,updateMenu(),updateContent("home"),setData()):($("#page").hide(),isLogin=!1,updateMenu());break;case"checkCode":isLogin=!1,param=e.param,$("#page").show(),updateMenu();break;case"setMoney":updateAmountSelector(e.param);break;case"eventReturn":e.status||setTimeout(function(){$.post("https://OraBankMenu/GetData",JSON.stringify({})),updateContent("home")},1e3);break;case"setData":param=e.param,setData()}}),document.onkeyup=function(t){if(27==t.which){$.post("https://OraBankMenu/exit",JSON.stringify({})),codeInput.value="";return}},document.getElementsByClassName("code-button")))e.addEventListener("click",t=>{codeInput.value.length<4&&(codeInput.value+=e.innerHTML)});for(let n of document.getElementById("navbar-menu").children)n.addEventListener("click",t=>{updateContent(n.id.split("-")[1])});for(let a of document.getElementsByClassName("bill-amount-plus"))a.addEventListener("click",t=>{let e=a.parentNode.querySelector(".bill-amount-value");e.innerHTML==a.parentNode.dataset.max?e.innerHTML=0:e.innerHTML=parseInt(e.innerHTML)+1});for(let l of document.getElementsByClassName("bill-amount-minus"))l.addEventListener("click",t=>{let e=l.parentNode.querySelector(".bill-amount-value");0==e.innerHTML?e.innerHTML=l.parentNode.dataset.max:e.innerHTML=parseInt(e.innerHTML)-1});for(let i of document.getElementsByClassName("bill-amount-button"))i.addEventListener("click",t=>{let e=0;for(let n of document.getElementsByClassName("bill-amount-value"))e+=parseInt(n.id.split("-")[3])*parseInt(n.innerHTML);$("#bill-amount-deposit-total").html(e)});$("#login-input-clear").click(()=>{codeInput.value=""}),$("#login-submit").click(()=>{4==codeInput.value.length&&(codeInput.value==param.code?$.post("https://OraBankMenu/CodeSubmit",JSON.stringify({code:!0})):($.post("https://OraBankMenu/CodeSubmit",JSON.stringify({code:!1})),$.post("https://OraBankMenu/exit",JSON.stringify({}))),$("#code-input").val(""))}),$("#button-link-account").click(()=>{updateContent("account")}),$("#menu-exit").click(()=>{$.post("https://OraBankMenu/exit",JSON.stringify({}))}),$("#menu-deposit").click(()=>{$.post("https://OraBankMenu/Refresh",JSON.stringify({}))}),$("#button-submit-deposit").click(()=>{let t=0,e={};for(let n of am)e[n]=parseInt(document.getElementById("bill-amount-value-"+n).innerHTML),t+=e[n]*n,document.getElementById("bill-amount-value-"+n).innerHTML="0";t>0&&($.post("https://OraBankMenu/Deposit",JSON.stringify({amount:t,billList:e})),$("#bill-amount-deposit-total").html("0"))}),$("#button-submit-withdraw").click(()=>{let t=0;(t=parseInt(document.getElementById("input-withdraw-amount").value))>0&&""!=t&&null!=t&&0!=t&&t!=NaN&&($.post("https://OraBankMenu/Withdraw",JSON.stringify({amount:t})),document.getElementById("input-withdraw-amount").value="")}),$("#button-submit-send").click(()=>{let t=0,e="",n="";t=parseInt(document.getElementById("input-send-amount").value),e=document.getElementById("input-send-rib1").value,n=document.getElementById("input-send-rib2").value,t>0&&""!=t&&null!=t&&0!=t&&t!=NaN&&""!=e&&null!=e&&0!=e&&e!=NaN&&""!=n&&null!=n&&0!=n&&n!=NaN&&($.post("https://OraBankMenu/Send",JSON.stringify({amount:t,rib1:e,rib2:n})),document.getElementById("input-send-amount").value="",document.getElementById("input-send-rib1").value="",document.getElementById("input-send-rib2").value="")}),$("#button-submit-newcode").click(()=>{$.post("https://OraBankMenu/NewCode",JSON.stringify({}))})}});